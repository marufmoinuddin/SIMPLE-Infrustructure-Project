<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMPLE Production Dashboard - Real-Time Infrastructure Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .server-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .server-id {
            font-size: 1.5em;
            font-weight: bold;
            color: #FFD700;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .card-title {
            font-size: 1.2em;
            font-weight: bold;
        }

        .card-icon {
            font-size: 1.5em;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .metric-value {
            font-weight: bold;
            color: #4CAF50;
        }

        .demo-section {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 20px;
        }

        .demo-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .demo-button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .demo-button:active {
            transform: translateY(0);
        }

        .results-area {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-left: 3px solid #4CAF50;
            padding-left: 10px;
        }

        .error-log {
            border-left-color: #FF6B6B;
            color: #FFB6B6;
        }

        .info-log {
            border-left-color: #4ECDC4;
            color: #B6F7F1;
        }

        .warn-log {
            border-left-color: #FFD93D;
            color: #FFF2B6;
        }

        .architecture-view {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .tier {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .tier-active {
            border-color: #4CAF50;
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
        }

        .tier-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #FFD700;
        }

        .tier-status {
            font-size: 12px;
            margin-top: 10px;
        }

        .session-info {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .stat-box {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0.8;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .real-time-data {
            background: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .architecture-view {
                grid-template-columns: 1fr 1fr;
            }
            
            .demo-actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="server-info">
                <div>
                    <h1>üöÄ SIMPLE Production Dashboard</h1>
                    <p>Real-Time Infrastructure Demonstration</p>
                </div>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="server-id">Loading...</span>
                </div>
            </div>
            <div id="current-time"></div>
        </div>

        <!-- Infrastructure Status Dashboard -->
        <div class="dashboard-grid">
            <!-- Load Balancer Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-title">Load Balancer</span>
                    <span class="card-icon">‚öñÔ∏è</span>
                </div>
                <div class="metric">
                    <span>VIP Status:</span>
                    <span class="metric-value" id="vip-status">Checking...</span>
                </div>
                <div class="metric">
                    <span>Active LB:</span>
                    <span class="metric-value" id="active-lb">Unknown</span>
                </div>
                <div class="metric">
                    <span>SSL Termination:</span>
                    <span class="metric-value" id="ssl-status">Active</span>
                </div>
                <div class="metric">
                    <span>Backend Servers:</span>
                    <span class="metric-value" id="backend-count">2</span>
                </div>
            </div>

            <!-- Application Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-title">Application Tier</span>
                    <span class="card-icon">üñ•Ô∏è</span>
                </div>
                <div class="metric">
                    <span>Current Server:</span>
                    <span class="metric-value" id="current-app-server">Loading...</span>
                </div>
                <div class="metric">
                    <span>Response Time:</span>
                    <span class="metric-value" id="response-time">0ms</span>
                </div>
                <div class="metric">
                    <span>Request Count:</span>
                    <span class="metric-value" id="request-count">0</span>
                </div>
                <div class="metric">
                    <span>Load Balance:</span>
                    <span class="metric-value" id="load-balance">Least Conn</span>
                </div>
            </div>

            <!-- Redis Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-title">Redis Cache</span>
                    <span class="card-icon">üóÑÔ∏è</span>
                </div>
                <div class="metric">
                    <span>Master Status:</span>
                    <span class="metric-value" id="redis-master">Checking...</span>
                </div>
                <div class="metric">
                    <span>Slave Status:</span>
                    <span class="metric-value" id="redis-slave">Checking...</span>
                </div>
                <div class="metric">
                    <span>Keys Stored:</span>
                    <span class="metric-value" id="redis-keys">0</span>
                </div>
                <div class="metric">
                    <span>Cache Hits:</span>
                    <span class="metric-value" id="cache-hits">0</span>
                </div>
            </div>

            <!-- Database Status -->
            <div class="dashboard-card">
                <div class="card-header">
                    <span class="card-title">PostgreSQL DB</span>
                    <span class="card-icon">üóÉÔ∏è</span>
                </div>
                <div class="metric">
                    <span>Master Status:</span>
                    <span class="metric-value" id="db-master">Checking...</span>
                </div>
                <div class="metric">
                    <span>Slave Status:</span>
                    <span class="metric-value" id="db-slave">Checking...</span>
                </div>
                <div class="metric">
                    <span>Total Users:</span>
                    <span class="metric-value" id="total-users">Loading...</span>
                </div>
                <div class="metric">
                    <span>Active Sessions:</span>
                    <span class="metric-value" id="active-sessions">0</span>
                </div>
            </div>
        </div>

        <!-- Interactive Demo Section -->
        <div class="demo-section">
            <h2>üß™ Interactive Infrastructure Demo</h2>
            <p>Test all infrastructure components and see real-time results:</p>
            
            <div class="demo-actions">
                <button class="demo-button" onclick="testLoadBalancer()">
                    üîÑ Test Load Balancing
                </button>
                <button class="demo-button" onclick="testRedisCache()">
                    üíæ Test Redis Cache
                </button>
                <button class="demo-button" onclick="testDatabase()">
                    üóÑÔ∏è Test Database Operations
                </button>
                <button class="demo-button" onclick="testSessionManagement()">
                    üë§ Test Session Management
                </button>
                <button class="demo-button" onclick="testFailover()">
                    ‚ö†Ô∏è Simulate Failover
                </button>
                <button class="demo-button" onclick="performHealthCheck()">
                    üè• Full Health Check
                </button>
                <button class="demo-button" onclick="loadTest()">
                    üìä Performance Test
                </button>
                <button class="demo-button" onclick="clearLogs()">
                    üßπ Clear Logs
                </button>
            </div>

            <div class="results-area" id="results-area">
                <div class="log-entry info-log">
                    <strong>[INIT]</strong> SIMPLE Infrastructure Dashboard initialized. Ready for testing...
                </div>
            </div>
        </div>

        <!-- Architecture Visualization -->
        <div class="demo-section">
            <h2>üèóÔ∏è Live Architecture Status</h2>
            <div class="architecture-view">
                <div class="tier tier-active" id="lb-tier">
                    <div class="tier-title">Load Balancer</div>
                    <div>VIP: 192.168.122.100</div>
                    <div>LB1: 192.168.122.101</div>
                    <div>LB2: 192.168.122.102</div>
                    <div class="tier-status" id="lb-tier-status">‚úÖ Active</div>
                </div>
                
                <div class="tier" id="app-tier">
                    <div class="tier-title">Application</div>
                    <div>App1: 192.168.122.111</div>
                    <div>App2: 192.168.122.112</div>
                    <div class="tier-status" id="app-tier-status">‚è≥ Testing...</div>
                </div>
                
                <div class="tier" id="redis-tier">
                    <div class="tier-title">Redis Cache</div>
                    <div>Master: 192.168.122.121</div>
                    <div>Slave: 192.168.122.122</div>
                    <div class="tier-status" id="redis-tier-status">‚è≥ Testing...</div>
                </div>
                
                <div class="tier" id="db-tier">
                    <div class="tier-title">Database</div>
                    <div>Master: 192.168.122.131</div>
                    <div>Slave: 192.168.122.132</div>
                    <div class="tier-status" id="db-tier-status">‚è≥ Testing...</div>
                </div>
            </div>
        </div>

        <!-- Session Information -->
        <div class="demo-section">
            <h2>üìä Session & Statistics</h2>
            <div class="session-info">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="stat-requests">0</div>
                        <div class="stat-label">Total Requests</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="stat-cache-ops">0</div>
                        <div class="stat-label">Cache Operations</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="stat-db-queries">0</div>
                        <div class="stat-label">DB Queries</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="stat-uptime">0</div>
                        <div class="stat-label">Uptime (min)</div>
                    </div>
                </div>
                
                <div class="real-time-data" id="real-time-data">
                    <strong>Real-time Infrastructure Data:</strong><br>
                    Session ID: <span id="session-id">Generating...</span><br>
                    Load Balancer: <span id="current-lb">Detecting...</span><br>
                    Server Process: <span id="server-process">Initializing...</span><br>
                    Cache Status: <span id="cache-status">Connecting...</span><br>
                    DB Connection: <span id="db-connection">Establishing...</span><br>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let requestCount = 0;
        let cacheOperations = 0;
        let dbQueries = 0;
        let startTime = Date.now();
        let sessionId = '';
        
        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            startRealTimeUpdates();
        });

        // Initialize dashboard with server information
        function initializeDashboard() {
            // Generate session ID
            sessionId = 'session_' + Math.random().toString(36).substr(2, 9);
            document.getElementById('session-id').textContent = sessionId;
            
            // Get server information
            fetch('/info')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('server-id').textContent = `Server: ${data.hostname} (${data.ip})`;
                    document.getElementById('current-app-server').textContent = data.hostname;
                    document.getElementById('server-process').textContent = `PID: ${Math.floor(Math.random() * 10000)}`;
                })
                .catch(error => {
                    document.getElementById('server-id').textContent = 'Server: Unknown';
                    logMessage('ERROR', 'Failed to get server info: ' + error.message);
                });

            // Simulate initial checks
            performInitialHealthCheck();
        }

        // Start real-time updates
        function startRealTimeUpdates() {
            // Update time every second
            setInterval(updateTime, 1000);
            
            // Update stats every 5 seconds
            setInterval(updateStats, 5000);
            
            // Perform health checks every 30 seconds
            setInterval(performHealthCheck, 30000);
        }

        // Update current time
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleString();
            
            // Update uptime
            const uptime = Math.floor((Date.now() - startTime) / 60000);
            document.getElementById('stat-uptime').textContent = uptime;
        }

        // Update statistics
        function updateStats() {
            document.getElementById('stat-requests').textContent = requestCount;
            document.getElementById('stat-cache-ops').textContent = cacheOperations;
            document.getElementById('stat-db-queries').textContent = dbQueries;
        }

        // Log message to results area
        function logMessage(type, message) {
            const resultsArea = document.getElementById('results-area');
            const timestamp = new Date().toLocaleTimeString();
            const logClass = type.toLowerCase() + '-log';
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${logClass}`;
            logEntry.innerHTML = `<strong>[${timestamp}] [${type}]</strong> ${message}`;
            
            resultsArea.appendChild(logEntry);
            resultsArea.scrollTop = resultsArea.scrollHeight;
        }

        // Clear logs
        function clearLogs() {
            document.getElementById('results-area').innerHTML = 
                '<div class="log-entry info-log"><strong>[CLEAR]</strong> Logs cleared. Ready for new operations...</div>';
        }

        // Test load balancer
        function testLoadBalancer() {
            logMessage('INFO', 'Testing load balancer distribution...');
            
            // Simulate multiple requests to different servers
            const servers = ['app1', 'app2'];
            let serverCount = {};
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const server = servers[Math.floor(Math.random() * servers.length)];
                    serverCount[server] = (serverCount[server] || 0) + 1;
                    
                    fetch('/health')
                        .then(response => response.json())
                        .then(data => {
                            requestCount++;
                            logMessage('INFO', `Request ${i+1}/10 -> ${data.server || 'unknown'} (${response.status})`);
                            
                            if (i === 9) {
                                logMessage('SUCCESS', `Load balancing test complete. Distribution: ${JSON.stringify(serverCount)}`);
                                updateTierStatus('app-tier', '‚úÖ Load Balanced');
                            }
                        })
                        .catch(error => {
                            logMessage('ERROR', `Request ${i+1}/10 failed: ${error.message}`);
                        });
                }, i * 200);
            }
        }

        // Test Redis cache
        function testRedisCache() {
            logMessage('INFO', 'Testing Redis cache operations...');
            
            // Simulate cache operations
            const operations = [
                'SET user:session:' + sessionId + ' "active"',
                'GET user:session:' + sessionId,
                'SET counter:requests ' + requestCount,
                'INCR counter:requests',
                'SET app:config "production"',
                'EXPIRE user:session:' + sessionId + ' 3600'
            ];
            
            operations.forEach((op, index) => {
                setTimeout(() => {
                    cacheOperations++;
                    logMessage('INFO', `Redis: ${op}`);
                    
                    // Simulate success/failure
                    if (Math.random() > 0.1) {
                        logMessage('SUCCESS', `Cache operation successful: ${op.split(' ')[0]}`);
                    } else {
                        logMessage('WARN', `Cache operation delayed: ${op.split(' ')[0]}`);
                    }
                    
                    if (index === operations.length - 1) {
                        updateTierStatus('redis-tier', '‚úÖ Cache Active');
                        document.getElementById('redis-keys').textContent = cacheOperations;
                        document.getElementById('cache-hits').textContent = Math.floor(cacheOperations * 0.8);
                    }
                }, index * 300);
            });
        }

        // Test database operations
        function testDatabase() {
            logMessage('INFO', 'Testing database operations...');
            
            // Simulate database queries
            const queries = [
                'SELECT COUNT(*) FROM users',
                'INSERT INTO sessions (id, user_id) VALUES (\'' + sessionId + '\', 1)',
                'SELECT * FROM users WHERE username = \'admin\'',
                'UPDATE sessions SET expires_at = NOW() + INTERVAL \'1 hour\' WHERE id = \'' + sessionId + '\'',
                'SELECT COUNT(*) FROM sessions WHERE expires_at > NOW()'
            ];
            
            queries.forEach((query, index) => {
                setTimeout(() => {
                    dbQueries++;
                    logMessage('INFO', `DB Query: ${query.substring(0, 50)}...`);
                    
                    // Simulate query results
                    if (query.includes('COUNT')) {
                        const count = Math.floor(Math.random() * 100) + 1;
                        logMessage('SUCCESS', `Query result: ${count} rows`);
                        
                        if (query.includes('users')) {
                            document.getElementById('total-users').textContent = count;
                        } else if (query.includes('sessions')) {
                            document.getElementById('active-sessions').textContent = count;
                        }
                    } else {
                        logMessage('SUCCESS', 'Query executed successfully');
                    }
                    
                    if (index === queries.length - 1) {
                        updateTierStatus('db-tier', '‚úÖ DB Connected');
                    }
                }, index * 400);
            });
        }

        // Test session management
        function testSessionManagement() {
            logMessage('INFO', 'Testing session management across tiers...');
            
            // Step 1: Create session in Redis
            setTimeout(() => {
                logMessage('INFO', 'Creating session in Redis cache...');
                cacheOperations++;
                logMessage('SUCCESS', `Session ${sessionId} created in Redis`);
            }, 500);
            
            // Step 2: Store session in database
            setTimeout(() => {
                logMessage('INFO', 'Storing session metadata in database...');
                dbQueries++;
                logMessage('SUCCESS', 'Session metadata stored in PostgreSQL');
            }, 1000);
            
            // Step 3: Validate session through load balancer
            setTimeout(() => {
                logMessage('INFO', 'Validating session through load balancer...');
                requestCount++;
                logMessage('SUCCESS', 'Session validated through load balancer');
            }, 1500);
            
            // Step 4: Update session activity
            setTimeout(() => {
                logMessage('INFO', 'Updating session activity...');
                cacheOperations++;
                dbQueries++;
                logMessage('SUCCESS', 'Session activity updated in cache and database');
                logMessage('INFO', 'Session management test complete - all tiers involved!');
            }, 2000);
        }

        // Simulate failover testing
        function testFailover() {
            logMessage('WARN', 'Simulating failover scenarios...');
            
            // Simulate load balancer failover
            setTimeout(() => {
                logMessage('WARN', 'Simulating LB1 failure...');
                document.getElementById('active-lb').textContent = 'LB2 (Backup)';
                logMessage('INFO', 'VIP moved to LB2 - traffic continuing');
            }, 500);
            
            // Simulate app server failover
            setTimeout(() => {
                logMessage('WARN', 'Simulating App1 failure...');
                logMessage('INFO', 'Load balancer routing all traffic to App2');
                updateTierStatus('app-tier', '‚ö†Ô∏è 1 Server Down');
            }, 1500);
            
            // Simulate Redis failover
            setTimeout(() => {
                logMessage('WARN', 'Simulating Redis master failure...');
                logMessage('INFO', 'Promoting Redis slave to master');
                updateTierStatus('redis-tier', '‚ö†Ô∏è Failover Mode');
            }, 2500);
            
            // Recovery
            setTimeout(() => {
                logMessage('SUCCESS', 'All services recovered - infrastructure resilient!');
                document.getElementById('active-lb').textContent = 'LB1 (Primary)';
                updateTierStatus('app-tier', '‚úÖ Load Balanced');
                updateTierStatus('redis-tier', '‚úÖ Cache Active');
            }, 4000);
        }

        // Perform initial health check
        function performInitialHealthCheck() {
            logMessage('INFO', 'Performing initial health check...');
            
            // Check each tier
            setTimeout(() => checkLoadBalancer(), 500);
            setTimeout(() => checkApplicationTier(), 1000);
            setTimeout(() => checkRedisTier(), 1500);
            setTimeout(() => checkDatabaseTier(), 2000);
        }

        // Full health check
        function performHealthCheck() {
            logMessage('INFO', 'Performing comprehensive health check...');
            
            checkLoadBalancer();
            setTimeout(() => checkApplicationTier(), 200);
            setTimeout(() => checkRedisTier(), 400);
            setTimeout(() => checkDatabaseTier(), 600);
            
            setTimeout(() => {
                logMessage('SUCCESS', 'Health check complete - all systems operational');
            }, 1000);
        }

        // Check load balancer
        function checkLoadBalancer() {
            fetch('/lb-health')
                .then(response => {
                    if (response.ok) {
                        document.getElementById('vip-status').textContent = 'Active';
                        document.getElementById('active-lb').textContent = 'LB1 (Primary)';
                        updateTierStatus('lb-tier', '‚úÖ Active');
                        logMessage('SUCCESS', 'Load balancer health check passed');
                    }
                })
                .catch(error => {
                    document.getElementById('vip-status').textContent = 'Error';
                    updateTierStatus('lb-tier', '‚ùå Error');
                    logMessage('ERROR', 'Load balancer health check failed: ' + error.message);
                });
        }

        // Check application tier
        function checkApplicationTier() {
            fetch('/health')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('current-app-server').textContent = data.server || 'Unknown';
                    document.getElementById('response-time').textContent = 
                        Math.floor(Math.random() * 50 + 10) + 'ms';
                    updateTierStatus('app-tier', '‚úÖ Healthy');
                    logMessage('SUCCESS', `Application server ${data.server} health check passed`);
                })
                .catch(error => {
                    updateTierStatus('app-tier', '‚ùå Error');
                    logMessage('ERROR', 'Application health check failed: ' + error.message);
                });
        }

        // Check Redis tier
        function checkRedisTier() {
            // Simulate Redis check
            document.getElementById('redis-master').textContent = 'Online';
            document.getElementById('redis-slave').textContent = 'Replicating';
            updateTierStatus('redis-tier', '‚úÖ Synced');
            logMessage('SUCCESS', 'Redis cluster health check passed');
        }

        // Check database tier
        function checkDatabaseTier() {
            // Simulate database check
            document.getElementById('db-master').textContent = 'Online';
            document.getElementById('db-slave').textContent = 'Replicating';
            updateTierStatus('db-tier', '‚úÖ Synced');
            logMessage('SUCCESS', 'Database cluster health check passed');
        }

        // Load test
        function loadTest() {
            logMessage('INFO', 'Starting performance load test...');
            
            const testRequests = 50;
            let completedRequests = 0;
            let totalResponseTime = 0;
            
            for (let i = 0; i < testRequests; i++) {
                setTimeout(() => {
                    const startTime = Date.now();
                    
                    fetch('/health')
                        .then(response => {
                            const responseTime = Date.now() - startTime;
                            totalResponseTime += responseTime;
                            completedRequests++;
                            requestCount++;
                            
                            if (completedRequests === testRequests) {
                                const avgResponseTime = Math.floor(totalResponseTime / testRequests);
                                logMessage('SUCCESS', 
                                    `Load test complete: ${testRequests} requests, ` +
                                    `avg response time: ${avgResponseTime}ms`);
                                document.getElementById('response-time').textContent = avgResponseTime + 'ms';
                                document.getElementById('request-count').textContent = requestCount;
                            }
                        })
                        .catch(error => {
                            logMessage('ERROR', `Load test request ${i+1} failed: ${error.message}`);
                        });
                }, i * 50);
            }
        }

        // Update tier status
        function updateTierStatus(tierId, status) {
            const tier = document.getElementById(tierId);
            const statusElement = document.getElementById(tierId + '-status');
            
            statusElement.textContent = status;
            
            // Add visual indication
            if (status.includes('‚úÖ')) {
                tier.classList.add('tier-active');
            } else if (status.includes('‚ùå')) {
                tier.classList.remove('tier-active');
                tier.style.borderColor = '#FF6B6B';
            } else if (status.includes('‚ö†Ô∏è')) {
                tier.classList.remove('tier-active');
                tier.style.borderColor = '#FFD93D';
            }
        }

        // Update real-time data periodically
        setInterval(() => {
            document.getElementById('current-lb').textContent = 'LB1 -> ' + 
                ['App1', 'App2'][Math.floor(Math.random() * 2)];
            document.getElementById('cache-status').textContent = 
                'Master: ' + Math.floor(Math.random() * 1000) + ' ops/sec';
            document.getElementById('db-connection').textContent = 
                'Pool: ' + (Math.floor(Math.random() * 20) + 5) + '/50 connections';
        }, 3000);
    </script>
</body>
</html>
